"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3709],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>f});var o=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,o,r=function(e,a){if(null==e)return{};var t,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)t=n[o],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)t=n[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=o.createContext({}),u=function(e){var a=o.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):s(s({},a),e)),t},c=function(e){var a=u(e.components);return o.createElement(l.Provider,{value:a},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},m=o.forwardRef((function(e,a){var t=e.components,r=e.mdxType,n=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(t),m=r,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||n;return t?o.createElement(f,s(s({ref:a},c),{},{components:t})):o.createElement(f,s({ref:a},c))}));function f(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var n=t.length,s=new Array(n);s[0]=m;var i={};for(var l in a)hasOwnProperty.call(a,l)&&(i[l]=a[l]);i.originalType=e,i[p]="string"==typeof e?e:r,s[1]=i;for(var u=2;u<n;u++)s[u]=t[u];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8431:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>n,metadata:()=>i,toc:()=>u});var o=t(7462),r=(t(7294),t(3905));const n={},s="USERSINAT.PRW",i={unversionedId:"Fontes/usersinat",id:"Fontes/usersinat",title:"USERSINAT.PRW",description:"Bloqueio de usu\xe1rios inativos no Protheus",source:"@site/docs/2-Fontes/usersinat.md",sourceDirName:"2-Fontes",slug:"/Fontes/usersinat",permalink:"/docushark/docs/Fontes/usersinat",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"transporteBancosShark.py",permalink:"/docushark/docs/Fontes/transporteBancosShark"},next:{title:"Rotinas",permalink:"/docushark/docs/category/rotinas"}},l={},u=[{value:"Dados da Customiza\xe7\xe3o",id:"dados-da-customiza\xe7\xe3o",level:2},{value:"Especifica\xe7\xe3o da Customiza\xe7\xe3o",id:"especifica\xe7\xe3o-da-customiza\xe7\xe3o",level:2},{value:"Especifica\xe7\xf5es das Fun\xe7\xf5es e Rotinas",id:"especifica\xe7\xf5es-das-fun\xe7\xf5es-e-rotinas",level:2},{value:"Crit\xe9rios para Valida\xe7\xe3o",id:"crit\xe9rios-para-valida\xe7\xe3o",level:2},{value:"Par\xe2metros utilizados",id:"par\xe2metros-utilizados",level:2}],c={toc:u};function p(e){let{components:a,...t}=e;return(0,r.kt)("wrapper",(0,o.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"usersinatprw"},"USERSINAT.PRW"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Bloqueio de usu\xe1rios inativos no Protheus")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"dados-da-customiza\xe7\xe3o"},"Dados da Customiza\xe7\xe3o"),(0,r.kt)("p",null,"Analista: Carlos Henrique"),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"especifica\xe7\xe3o-da-customiza\xe7\xe3o"},"Especifica\xe7\xe3o da Customiza\xe7\xe3o"),(0,r.kt)("p",null,"Est\xe1 customiza\xe7\xe3o foi desenvolvidada com o objetivo de bloquear usu\xe1rios inativos por mais de 45 dias no sistema."),(0,r.kt)("p",null,"A rotina roda semanalmente e envia um e-mail com todos os usu\xe1rios bloqueados.  "),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"especifica\xe7\xf5es-das-fun\xe7\xf5es-e-rotinas"},"Especifica\xe7\xf5es das Fun\xe7\xf5es e Rotinas"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"U_USERSINAT(aParam)")," - \xc9 utilizada para fazer a busca na tabela SZT atrav\xe9s do campo ZT_ACESSO(\xfaltimo acesso no sistema) e compara com o \xfaltimo acesso na CV8 pel\xe7a fun\xe7\xe3o ULTACESS para garatir que n\xe3o tenha logado no sistema."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\xc9 feito uma busca na tabela SZT considerando que a data de corte (45 dias) e com o status ",(0,r.kt)("strong",{parentName:"p"},"L (Liberado)")," ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Compara os acessos da busca com a CV8 utilizando a fun\xe7\xe3o ",(0,r.kt)("strong",{parentName:"p"},"ULTACESS"),", caso o \xfaltimo acesso seja menor que a data de corte, \xe9 gravado em uma variavel array.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\xc9 feito um RecLock na tabela SZT para alterar os campos ",(0,r.kt)("strong",{parentName:"p"},"ZT_NOME,ZT_EMAIL,ZT_EMAIL2 e ZT_STATUS"),". Em seguida \xe9 feito o bloqueio via API, pois n\xe3o temos acesso direto aos usu\xe1rios. "))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"ULTACESS")," - Fun\xe7\xe3o para validar o \xfaltimo acesso no sistema atrav\xe9s da tabela (CV8 - Log de Processamento) fazendo a busca em todas as empresas do grupo.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"crit\xe9rios-para-valida\xe7\xe3o"},"Crit\xe9rios para Valida\xe7\xe3o"),(0,r.kt)("p",null,"\xc9 necess\xe1rio atender alguns crit\xe9rios para que seja efetivado o bloqueio, sendo assim: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"45 dias dias sem acessar o sistema;"),(0,r.kt)("li",{parentName:"ul"},"N\xe3o bloquar usu\xe1rio do coletor,caixa,faturamento ou administrador.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"par\xe2metros-utilizados"},"Par\xe2metros utilizados"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"ES_ENVUSER - E-mail destinat\xe1rio;"),(0,r.kt)("li",{parentName:"ol"},"ES_NOBLOC  - Usu\xe1rios que n\xe3o podem ser bloqueados;"),(0,r.kt)("li",{parentName:"ol"},"ES_DTINAT - Crit\xe9rio de dias determinado pela Diretoria para o bloqueio.")))}p.isMDXComponent=!0}}]);